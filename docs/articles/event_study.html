<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="did2s">
<title>So you're trying to choose an event-study estimator... • did2s</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="So you're trying to choose an event-study estimator...">
<meta property="og:description" content="did2s">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">did2s</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Two-Stage-Difference-in-Differences.html">Two-Stage Difference-in-Differences</a>
    <a class="dropdown-item" href="../articles/event_study.html">So you're trying to choose an event-study estimator...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>So you're trying to choose an event-study estimator...</h1>
            
      
      
      <div class="d-none name"><code>event_study.Rmd</code></div>
    </div>

    
    
<p>The command <code>event_study</code> presents a common syntax that
estimates the event-study TWFE model for treatment-effect heterogeneity
robust estimators recommended by the literature and returns all the
estimates in a data.frame for easy plotting by the command
<code>plot_event_study</code>. The general syntax is</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/event_study.html">event_study</a></span><span class="op">(</span></span>
<span>    <span class="va">data</span>, <span class="va">yname</span>, <span class="va">idname</span>, <span class="va">tname</span>, <span class="va">gname</span>, </span>
<span>    <span class="va">estimator</span>,</span>
<span>    xformla <span class="op">=</span> <span class="cn">NULL</span>, horizon <span class="op">=</span> <span class="cn">NULL</span>, weights <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The option <code>data</code> specifies the data set that contains the
variables for the analysis. The four other required options are all
names of variables: <code>yname</code> corresponds with the outcome
variable of interest; <code>idname</code> is the variable corresponding
to the (unique) unit identifier, <span class="math inline">\(i\)</span>;
<code>tname</code> is the variable corresponding to the time-period,
<span class="math inline">\(t\)</span>; and <code>gname</code> is a
variable indicating the period when treatment first starts
(group-status).</p>
<div id="fdpynlwqsa" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#fdpynlwqsa .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 1000px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fdpynlwqsa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fdpynlwqsa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fdpynlwqsa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fdpynlwqsa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fdpynlwqsa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fdpynlwqsa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fdpynlwqsa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fdpynlwqsa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fdpynlwqsa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fdpynlwqsa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fdpynlwqsa .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#fdpynlwqsa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fdpynlwqsa .gt_from_md > :first-child {
  margin-top: 0;
}

#fdpynlwqsa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fdpynlwqsa .gt_row {
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fdpynlwqsa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fdpynlwqsa .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fdpynlwqsa .gt_row_group_first td {
  border-top-width: 2px;
}

#fdpynlwqsa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdpynlwqsa .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fdpynlwqsa .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fdpynlwqsa .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fdpynlwqsa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdpynlwqsa .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fdpynlwqsa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fdpynlwqsa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fdpynlwqsa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fdpynlwqsa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdpynlwqsa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fdpynlwqsa .gt_sourcenote {
  font-size: 14px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdpynlwqsa .gt_left {
  text-align: left;
}

#fdpynlwqsa .gt_center {
  text-align: center;
}

#fdpynlwqsa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fdpynlwqsa .gt_font_normal {
  font-weight: normal;
}

#fdpynlwqsa .gt_font_bold {
  font-weight: bold;
}

#fdpynlwqsa .gt_font_italic {
  font-style: italic;
}

#fdpynlwqsa .gt_super {
  font-size: 65%;
}

#fdpynlwqsa .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#fdpynlwqsa .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#fdpynlwqsa .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fdpynlwqsa .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#fdpynlwqsa .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#fdpynlwqsa .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="table gt_table">
<caption>Event Study Estimators</caption>
  
  <thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Estimator</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">R package and Estimator Option</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Comparison group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Main Assumptions</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Uniform inference of estimates</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>Gardner (2021)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p><a href="http://kylebutts.com/did2s/">did2s</a></p>
</div></td>
<td class="gt_row gt_left">Imputes \(Y(0)\)</td>
<td class="gt_row gt_left">Not-yet- and/or Never-treated</td>
<td class="gt_row gt_center"><div class="gt_from_md"><ul>
<li>Parallel Trends for all units</li>
<li>Limited anticipation<sup>*</sup>
</li>
<li>Correct specification of \(Y(0)\)</li>
</ul></div></td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>Borusyak, Jaravel, and Spiess (2021)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p><code>{didimputation}</code></p>
</div></td>
<td class="gt_row gt_left">Imputes \(Y(0)\)</td>
<td class="gt_row gt_left">Not-yet- and/or Never-treated</td>
<td class="gt_row gt_center"><div class="gt_from_md"><ul>
<li>Parallel Trends for all units</li>
<li>Limited anticipation<sup>*</sup>
</li>
<li>Correct specification of \(Y(0)\)</li>
</ul></div></td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>Callaway and Sant'Anna (2021)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p><a href="https://bcallaway11.github.io/did/" class="external-link">did</a></p>
</div></td>
<td class="gt_row gt_left">2x2 Aggregation</td>
<td class="gt_row gt_left">Either Not-yet- or Never-treated</td>
<td class="gt_row gt_center"><div class="gt_from_md"><ul>
<li>Parallel Trends for Not-yet-treated <i>or</i> Never-treated</li>
<li>Limited anticipation<sup>*</sup>
</li>
</ul></div></td>
<td class="gt_row gt_center">✔</td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>Sun and Abraham (2020)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p><code>{fixest/sunab}</code></p>
</div></td>
<td class="gt_row gt_left">2x2 Aggregation</td>
<td class="gt_row gt_left">Not-yet- and/or Never-treated</td>
<td class="gt_row gt_center"><div class="gt_from_md"><ul>
<li>Parallel Trends for all units</li>
<li>Limited anticipation<sup>*</sup>
</li>
</ul></div></td>
<td class="gt_row gt_center"></td>
</tr>
<tr>
<td class="gt_row gt_left"><div class="gt_from_md">
<p>Roth and Sant'Anna (2021)</p>
</div></td>
<td class="gt_row gt_left"><div class="gt_from_md">
<p><code>{staggered}</code></p>
</div></td>
<td class="gt_row gt_left">2x2 Aggregation</td>
<td class="gt_row gt_left">Not-yet-treated</td>
<td class="gt_row gt_center"><div class="gt_from_md"><ul>
<li>Treatment timing is random</li>
<li>Limited anticipation<sup>*</sup>
</li>
</ul></div></td>
<td class="gt_row gt_center"></td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="6">
<sup>*</sup> Anticipation can be accounted for by adjusting 'initial treatment day' back \(x\) periods, where \(x\) is the number of periods before treatment that anticipation can occur.</td>
    </tr></tfoot>
</table>
</div>
<p>There are five main estimators available and the choice is specified
for the <code>estimator</code> argument and are described in the table
above.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Except for Sun and Abraham, the &lt;code&gt;estimator&lt;/code&gt;
option is the package name. For Sun and Abraham, the
&lt;code&gt;estimator&lt;/code&gt; option is &lt;code&gt;sunab&lt;/code&gt;. A value of “all”
will estimate all 5 estimators.&lt;/p&gt;"><sup>1</sup></a>
The following paragraphs will aim to highlight the differences and
commonalities between estimators. These estimators fall into two broad
categories of estimators. First, <a href="http://kylebutts.com/did2s/">did2s</a> and
<code>{didimputation}</code> are <strong>imputation-based</strong>
estimators as described above. Both rely on “residualizing” the outcome
variable <span class="math inline">\(\tilde{Y} = Y_{it} - \hat{\mu}_g -
\hat{\eta}_t\)</span> and then averaging those <span class="math inline">\(\tilde{Y}\)</span> to estimate the event-study
average treatment effect <span class="math inline">\(\tau^k\)</span>.
These two estimators return identical point estimates, but differ in
their asymptotic regime and hence their standard errors.</p>
<p>The second type of estimator, which we label <strong>2x2
aggregation</strong>, takes a different approach for estimating
event-study average treatment effects. The packages <a href="https://bcallaway11.github.io/did/" class="external-link">did</a>,
<a href="https://lrberge.github.io/fixest/" class="external-link">fixest</a> and <code>{staggered}</code> first estimate <span class="math inline">\(\tau_{gt}\)</span> for all group-time pairs. To
estimate a particular <span class="math inline">\(\tau_{gt}\)</span>,
they use a two-period (periods <span class="math inline">\(t\)</span>
and <span class="math inline">\(g-1\)</span>) and two-group (group <span class="math inline">\(g\)</span> and a “control group”)
difference-in-differences estimator, known as a <code>2x2</code>
difference-in-differences. The particular “control group” they use will
differ based on estimator and is discussed in the next paragraph. Then,
the estimator manually aggregate <span class="math inline">\(\tau_{gt}\)</span> across all groups that were
treated for (at least) <span class="math inline">\(k\)</span> periods to
estimate the event-study average treatment effect <span class="math inline">\(\tau^k\)</span>.</p>
<p>These estimators do not all rely on the same underlying assumptions,
so the rest of the table tries to concisely summarize the differences
between estimators. The comparison group column describes which units
are utilized as comparison groups in the estimator and hence will
determine which units need to satisfy a parallel trends assumption. For
example, in some circumstances, treated units will look very different
from never-treated units. In this case, parallel trends may only hold
between ever-treated units and hence only these units should be used in
estimation. In other cases, for example if treatment is assigned
randomly, then it’s reasonable to assume that both not-yet- and
never-treated units would all satisfy parallel trends.</p>
<p>For estimators labeled “Not-yet- and/or never-treated”, the default
is to use both not-yet- and never-treated units in the estimator.
However, if all never-treated units are dropped from the data set before
using the estimator, then these estimators will use only not-yet-treated
groups as the comparison group. <a href="https://bcallaway11.github.io/did/" class="external-link">did</a> provides an option to
use either the not-yet- treated <em>or</em> the never- treated group as
a comparison group depending on which group a researcher thinks will
make a better comparison group. <code>{staggered}</code> will
automatically drop units that are never treated from the sample and
hence only use not-yet-treated groups as a comparison group.</p>
<p>The next column, <code>Main Assumptions</code>, tries to summarize
concisely the main theoretical assumptions underlying each estimator.
First, the assumptions about parallel trends match the previous
discussion on the correct comparison group. The only estimator that
doesn’t rely on a parallel trends assumption is
<code>{staggered}</code>, instead relying on the assumption that
<em>when</em> a unit receives treatment is random.</p>
<p>The next assumption, that is common across all estimators, is that
there should be “limited anticipation” of treatment. In general,
anticipatory effects are when units respond to treatment before it is
<em>actually</em> implemented. For example, this can be common if the
news of a treatment triggers behavior responses before the treatment is
put in place. “Limited anticipation” is when these anticipatory effects
can only exist in a “few” pre-periods.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;There should be more periods before treatment in the
sample than whatever number a “few” is.&lt;/p&gt;"><sup>2</sup></a> In any of these cases,
“treatment” should be manually moved back by the maximum number of
periods where anticipation can occur. For example, if treatment starts
in 2012 and anticipatory effects are reasonably only possible 2 years
before, this units’ “group” should be labelled as 2010 in the data.</p>
<p>The <strong>imputation-based</strong> estimators require an
additional assumption that the parametric model of <span class="math inline">\(Y(0) = \mu_i + \eta_t + \varepsilon_{it}\)</span>
is correctly specified. This is because in the first stage, you have to
accurately impute <span class="math inline">\(Y(0)\)</span> when
residualizing <span class="math inline">\(Y\)</span> which relies on the
correct specification of <span class="math inline">\(Y(0)\)</span>. The
<strong>2x2 aggregation</strong> models does not impute <span class="math inline">\(Y(0)\)</span> and hence only relies on a parallel
trends assumption. The last column highlights that <a href="https://bcallaway11.github.io/did/" class="external-link">did</a>
allows for uniform inference of estimates. This addresses the problem
that multiple hypotheses tests are being done by researchers
(e.g. checking individually if all post periods significant) by creating
standard errors that adjust for multiple testing.</p>
<div class="section level4">
<h4 id="example-usage-of-event_study">Example usage of <code>event_study</code><a class="anchor" aria-label="anchor" href="#example-usage-of-event_study"></a>
</h4>
<p>The result of <code>event_study</code> is a tibble in a
<code>tidy</code> format that contains point estimates and standard
errors for each relative time indicator for each individual estimator.
The results of <code>event_study</code> is a dataframe with event-study
term, the estimate, standard error, and a column containing a character
for which estimator is used. This output dataframe will in turn be
passed to <code>plot_event_study</code> for easy comparison. We return
to the <code>df_het</code> dataset to see example usage of these
functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://kylebutts.com/did2s/">did2s</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: fixest</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> did2s (v0.7.0). For more information on the methodology, visit <span style="color: #0000BB; font-style: italic;">&lt;https://www.kylebutts.com/did2s&gt;</span></span></span>
<span><span class="co">#&gt; To cite did2s in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Butts, Kyle (2021).  did2s: Two-Stage Difference-in-Differences</span></span>
<span><span class="co">#&gt;   Following Gardner (2021). R package version 0.7.0.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Manual{,</span></span>
<span><span class="co">#&gt;     title = {did2s: Two-Stage Difference-in-Differences Following Gardner (2021)},</span></span>
<span><span class="co">#&gt;     author = {Kyle Butts},</span></span>
<span><span class="co">#&gt;     year = {2021},</span></span>
<span><span class="co">#&gt;     url = {https://github.com/kylebutts/did2s/},</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">df_het</span>, package <span class="op">=</span> <span class="st">"did2s"</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op">=</span> <span class="fu"><a href="../reference/event_study.html">event_study</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">df_het</span>, yname <span class="op">=</span> <span class="st">"dep_var"</span>, idname <span class="op">=</span> <span class="st">"unit"</span>,</span>
<span>  tname <span class="op">=</span> <span class="st">"year"</span>, gname <span class="op">=</span> <span class="st">"g"</span>, estimator <span class="op">=</span> <span class="st">"all"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Note these estimators rely on different underlying assumptions. See Table 2 of <span style="color: #0000BB; font-style: italic;">&lt;https://arxiv.org/abs/2109.05913&gt;</span> for an overview.</span></span>
<span><span class="co">#&gt; Estimating TWFE Model</span></span>
<span><span class="co">#&gt; Estimating using Gardner (2021)</span></span>
<span><span class="co">#&gt; Estimating using Callaway and Sant'Anna (2020)</span></span>
<span><span class="co">#&gt; Estimating using Sun and Abraham (2020)</span></span>
<span><span class="co">#&gt; Estimating using Borusyak, Jaravel, Spiess (2021)</span></span>
<span><span class="co">#&gt; Estimating using Roth and Sant'Anna (2021)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span><span class="co">#&gt;    estimator  term   estimate  std.error</span></span>
<span><span class="co">#&gt;       &lt;char&gt; &lt;num&gt;      &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:      TWFE   -20 0.04097725 0.07167704</span></span>
<span><span class="co">#&gt; 2:      TWFE   -19 0.13665695 0.07147683</span></span>
<span><span class="co">#&gt; 3:      TWFE   -18 0.14015820 0.07245520</span></span>
<span><span class="co">#&gt; 4:      TWFE   -17 0.15793252 0.07431871</span></span>
<span><span class="co">#&gt; 5:      TWFE   -16 0.09910002 0.07379570</span></span>
<span><span class="co">#&gt; 6:      TWFE   -15 0.20561127 0.07116478</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/event_study.html">plot_event_study</a></span><span class="op">(</span><span class="va">out</span>, horizon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="event_study_files/figure-html/es-alternatives-1.png" alt="Event-study Estimators" width="100%"><p class="caption">
Event-study Estimators
</p>
</div>
</div>

  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kyle Butts, John Gardner.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
